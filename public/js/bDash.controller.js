'use strict';

angular.module('capstone').controller('bDashController', function ($scope, Bundles, $modal, Add, $rootScope) {

	(function () {
		var getAll = new Bundles.getAll();
		$scope.bundles = getAll.query();

		var getAllTags = new Bundles.getTags();
		$scope.existingTags = getAllTags.query();
	})();

	$scope['delete'] = function (id) {
		var deleteSelection = new Bundles.deleteOne();
		deleteSelection['delete']({ id: id }, function () {
			console.log('Deleted: ' + id);
			var getAll = new Bundles.getAll();
			$scope.bundles = getAll.query();
		});
	};
}).controller('addFormController', function (Bundles, $scope) {
	$scope.activeTab = 'Story';

	$scope.bundleSubmit = function () {
		Add.addBundle({
			title: $scope.title,
			url: $scope.url,
			tags: $scope.tags
			// userId: $rootScope.currentUser._id *** ADD WHEN CURRENTUSER IS VALIDATED
		}).then(function () {
			$scope.title = null;
			$scope.url = null;
			$scope.tags = null;
			var getAll = new Bundles.getAll();
			$scope.bundles = getAll.query();
		});
	};

	$scope.storySubmit = function () {
		Add.addStory({
			title: $scope.storyTitle,
			description: $scope.storyDescription,
			tags: $scope.tags
			// userId: $rootScope.currentUser ADD USER ID WHEN LINK IS READY
		}).then(function () {
			$scope.addStoryForm = null;
			$scope.storyTitle = null;
			$scope.storyTags = null;
			$scope.storyDescription = null;
		});
	};

	$scope.filter = function (tags) {
		console.log(tags);
	};
}).controller('detailsCtrl', function ($scope, Authorize, $state) {
	$scope.logout = function () {
		Authorize.logout().then(function () {
			$state.go('prelogin');
		});
	};
});
// CHANGE TO PUBLIC DASHBOARD
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9iRGFzaC5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FFekIsVUFBVSxDQUFDLGlCQUFpQixFQUFFLFVBQVUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRTs7QUFFbEYsRUFBQyxZQUFXO0FBQ1gsTUFBSSxNQUFNLEdBQUcsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUE7QUFDakMsUUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUE7O0FBRS9CLE1BQUksVUFBVSxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO0FBQ3RDLFFBQU0sQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFBO0VBQ3hDLENBQUEsRUFBRyxDQUFDOztBQUVMLE9BQU0sVUFBTyxHQUFHLFVBQVUsRUFBRSxFQUFFO0FBQzdCLE1BQUksZUFBZSxHQUFHLElBQUksT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO0FBQzdDLGlCQUFlLFVBQU8sQ0FBQyxFQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUMsRUFBRSxZQUFVO0FBQzFDLFVBQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFBO0FBQzdCLE9BQUksTUFBTSxHQUFHLElBQUksT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFBO0FBQ2pDLFNBQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBO0dBQy9CLENBQUMsQ0FBQTtFQUNGLENBQUE7Q0FHRCxDQUFDLENBRUQsVUFBVSxDQUFDLG1CQUFtQixFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMzRCxPQUFNLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQTs7QUFFMUIsT0FBTSxDQUFDLFlBQVksR0FBRyxZQUFXO0FBQ2hDLEtBQUcsQ0FBQyxTQUFTLENBQUM7QUFDWixRQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUs7QUFDbkIsTUFBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHO0FBQ2YsT0FBSSxFQUFFLE1BQU0sQ0FBQyxJQUFJOztBQUFBLEdBRWpCLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBVztBQUNsQixTQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUNwQixTQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztBQUNsQixTQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUNuQixPQUFJLE1BQU0sR0FBRyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQTtBQUNqQyxTQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtHQUMvQixDQUFDLENBQUE7RUFDSCxDQUFBOztBQUVELE9BQU0sQ0FBQyxXQUFXLEdBQUcsWUFBWTtBQUNoQyxLQUFHLENBQUMsUUFBUSxDQUFDO0FBQ1osUUFBSyxFQUFFLE1BQU0sQ0FBQyxVQUFVO0FBQ3hCLGNBQVcsRUFBRSxNQUFNLENBQUMsZ0JBQWdCO0FBQ3BDLE9BQUksRUFBRSxNQUFNLENBQUMsSUFBSTs7QUFBQSxHQUVqQixDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVc7QUFDakIsU0FBTSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUE7QUFDMUIsU0FBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUE7QUFDeEIsU0FBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7QUFDdkIsU0FBTSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQTtHQUM5QixDQUFDLENBQUE7RUFDSCxDQUFBOztBQUVELE9BQU0sQ0FBQyxNQUFNLEdBQUcsVUFBVSxJQUFJLEVBQUU7QUFDL0IsU0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNsQixDQUFBO0NBRUQsQ0FBQyxDQUVELFVBQVUsQ0FBQyxhQUFhLEVBQUUsVUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRTtBQUMvRCxPQUFNLENBQUMsTUFBTSxHQUFHLFlBQVc7QUFDMUIsV0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFXO0FBQ2xDLFNBQU0sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUE7R0FDckIsQ0FBQyxDQUFBO0VBQ0YsQ0FBQTtDQUVELENBQUMsQ0FBQSIsImZpbGUiOiJzcmMvanMvYkRhc2guY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdjYXBzdG9uZScpXG5cbi5jb250cm9sbGVyKCdiRGFzaENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBCdW5kbGVzLCAkbW9kYWwsIEFkZCwgJHJvb3RTY29wZSkge1xuXG5cdChmdW5jdGlvbigpIHtcblx0XHR2YXIgZ2V0QWxsID0gbmV3IEJ1bmRsZXMuZ2V0QWxsKClcblx0XHQkc2NvcGUuYnVuZGxlcyA9IGdldEFsbC5xdWVyeSgpXG5cblx0XHR2YXIgZ2V0QWxsVGFncyA9IG5ldyBCdW5kbGVzLmdldFRhZ3MoKVxuXHRcdCRzY29wZS5leGlzdGluZ1RhZ3MgPSBnZXRBbGxUYWdzLnF1ZXJ5KClcblx0fSkoKTtcblxuXHQkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKGlkKSB7XG5cdFx0dmFyIGRlbGV0ZVNlbGVjdGlvbiA9IG5ldyBCdW5kbGVzLmRlbGV0ZU9uZSgpXG5cdFx0ZGVsZXRlU2VsZWN0aW9uLmRlbGV0ZSh7aWQ6IGlkfSwgZnVuY3Rpb24oKXtcblx0XHRcdGNvbnNvbGUubG9nKCdEZWxldGVkOiAnICsgaWQpXG5cdFx0XHR2YXIgZ2V0QWxsID0gbmV3IEJ1bmRsZXMuZ2V0QWxsKClcblx0XHRcdCRzY29wZS5idW5kbGVzID0gZ2V0QWxsLnF1ZXJ5KClcblx0XHR9KVxuXHR9XG5cblxufSlcblxuLmNvbnRyb2xsZXIoJ2FkZEZvcm1Db250cm9sbGVyJywgZnVuY3Rpb24gKEJ1bmRsZXMsICRzY29wZSkge1xuXHQkc2NvcGUuYWN0aXZlVGFiID0gJ1N0b3J5J1xuXG5cdCRzY29wZS5idW5kbGVTdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHRBZGQuYWRkQnVuZGxlKHtcblx0XHRcdFx0dGl0bGU6ICRzY29wZS50aXRsZSxcblx0XHRcdFx0dXJsOiAkc2NvcGUudXJsLFxuXHRcdFx0XHR0YWdzOiAkc2NvcGUudGFnc1xuXHRcdFx0XHQvLyB1c2VySWQ6ICRyb290U2NvcGUuY3VycmVudFVzZXIuX2lkICoqKiBBREQgV0hFTiBDVVJSRU5UVVNFUiBJUyBWQUxJREFURURcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzY29wZS50aXRsZSA9IG51bGw7XG5cdFx0XHRcdCRzY29wZS51cmwgPSBudWxsO1xuXHRcdFx0XHQkc2NvcGUudGFncyA9IG51bGw7XG5cdFx0XHRcdHZhciBnZXRBbGwgPSBuZXcgQnVuZGxlcy5nZXRBbGwoKVxuXHRcdFx0XHQkc2NvcGUuYnVuZGxlcyA9IGdldEFsbC5xdWVyeSgpXG5cdFx0XHR9KVxuXHR9XG5cblx0JHNjb3BlLnN0b3J5U3VibWl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdEFkZC5hZGRTdG9yeSh7XG5cdFx0XHR0aXRsZTogJHNjb3BlLnN0b3J5VGl0bGUsXG5cdFx0XHRkZXNjcmlwdGlvbjogJHNjb3BlLnN0b3J5RGVzY3JpcHRpb24sXG5cdFx0XHR0YWdzOiAkc2NvcGUudGFnc1xuXHRcdFx0Ly8gdXNlcklkOiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyIEFERCBVU0VSIElEIFdIRU4gTElOSyBJUyBSRUFEWVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzY29wZS5hZGRTdG9yeUZvcm0gPSBudWxsXG5cdFx0XHRcdCRzY29wZS5zdG9yeVRpdGxlID0gbnVsbFxuXHRcdFx0XHQkc2NvcGUuc3RvcnlUYWdzID0gbnVsbFxuXHRcdFx0XHQkc2NvcGUuc3RvcnlEZXNjcmlwdGlvbiA9IG51bGxcblx0XHRcdH0pXG5cdH1cblxuXHQkc2NvcGUuZmlsdGVyID0gZnVuY3Rpb24gKHRhZ3MpIHtcblx0XHRjb25zb2xlLmxvZyh0YWdzKTtcblx0fVxuXG59KVxuXG4uY29udHJvbGxlcignZGV0YWlsc0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBBdXRob3JpemUsICRzdGF0ZSkge1xuXHQkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0QXV0aG9yaXplLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkc3RhdGUuZ28oJ3ByZWxvZ2luJykgLy8gQ0hBTkdFIFRPIFBVQkxJQyBEQVNIQk9BUkRcblx0XHR9KVxuXHR9XG5cbn0pXG5cblxuXG4iXX0=
